name: ğŸ§¹ Lint & Quality Check

on:
  push:
    branches: ["main", "dev", "feature/*"]
  pull_request:
    branches: ["main", "dev"]

jobs:
  lint:
    name: ğŸ” Code Linting
    runs-on: ubuntu-latest

    steps:
      # ğŸ§± Step 1: Checkout code
      - name: ğŸ“¦ Checkout repository
        uses: actions/checkout@v4

      # ğŸ§° Step 2: Setup Bun
      - name: âš™ï¸ Setup Bun Runtime
        uses: oven-sh/setup-bun@v2
        with:
           bun-version: latest

      # ğŸ§© Step 3: Install dependencies
      - name: ğŸ“¥ Install dependencies
        run: |
          echo "ğŸš€ Installing dependencies..."
          bun ci
          echo "âœ… Dependencies installed!"

      # ğŸ§  Step 4: Run ESLint
      - name: ğŸ§¹ Run ESLint
        if: success()
        run: |
          echo "::group::ğŸ” Running ESLint..."
          bun run lint || exit 1
          echo "::endgroup::"
          echo "âœ¨ ESLint check complete!"

      # ğŸ‰ Step 5: Final summary
      - name: ğŸ Lint complete
        if: success()
        run: echo "âœ… All checks passed!"

      - name: âŒ Lint failed
        if: failure()
        run: echo "âŒ Lint or formatting failed! Please fix issues before merging."
